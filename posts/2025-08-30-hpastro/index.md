---
title: ホームページを Astro で作り直した
draft: true
date: 2025-08-30
tags: [dev, web]
---

ホームページのリニューアルの時に考えていたことや流れをまとめました。また誰かが作り直すときの参考になれば幸いです。

## 以前のMCCのホームページ

Next.js に Velite.js や next-mdx-remote 等を組み合わせてブログを構成していました。

また、スタイリングには CSS Modules を用いており、一部 Tailwind CSS に移行された状態でした。

(以前僕が作り、メンテナンスしていたものです。)

## リニューアルのきっかけ

もちろん、前々から様々な理由で改修の必要性は感じていたのですが、決め手は Next.js のバグを踏んだことです。 


Cloudflare Pages から Cloudflare Workers へ移行する際、依存を一通りアップデートしたところ以下の Issue と同様のエラーに遭遇しました。

https://github.com/vercel/next.js/issues/58171

このエラー、静的生成のときだけ起こるようで、例えば OpenNext 等を使うと起こりません。
(注: Cloudflare で Next.js を使用する場合、基本的には静的生成するかOpenNextを使うかの2択です)

というわけで、最近 Astro を気に入っていたのもあり、Next.js をやめました。

## 移行の方針について

最低限の目標は以下の通りでした。

- 中身がほぼ同じな `blog`, `news` を `posts` に統合し、タグで管理する
- `/about` ベージを消し、トップページのボリュームを増やす
- 新たに `workshops` カテゴリを生やし、部内の講習資料を Astro Starlight のように作れるようにする

それに伴い、以下の点も意識しました。

- デザインをかっこよくする (僕の趣味ですすみません)
- スタイリングを Tailwind CSS に統一し、デザイントークンの管理を改善する。

## デザインする

デザインは得意ではなく、すぐCSSで細かいところを書いてしまうのですが、今回は意識してまずは全体のイメージをFigmaに起こすことにしました。

まずは Pinterest でアイデアを集めます。毎日見てたらおすすめがこんな調子になってしまいました。


とは言えこれらをそのまま Web デザインとして取り入れることはできません。見づらくならない程度に僕のできる範囲でかっこよくします。

う〜んなんかダサいですが、時間もないのでとりあえずこれでいきます。

続いてはトップベージです。スクロールドリブンアニメーションかスクロールトリガーアニメーションを使い、画面全体を使ったデザインを数ベージ用意します。

スクロールハックがアクセシビリティ的に良くないのは知っていますが、僕は好きです。スクロールスナップは我慢して使いませんでした。

ロゴアニメーションは1年ほど前に Blender で作成したものです。個人的に気に入っているので引き続き使用します。[神椿のHP](https://kamitsubaki.jp)の影響を受けています。

残りのページは以下のような感じでデザインしています。後半になるにつれ疲れて手抜きが見えます。最終ページに関してはデザインすらありません……。


## 実装する

デザインをもとに実装していきます。変な形状ばかり使うせいで `clip-path` 祭りです。とても大変です。

また、デザイン時には省いたホバー時のエフェクトも用意しつつ、レスポンシブ対応をチェックしながら進めます。

Figma の Dev Mode MCP ですが、デザインがこんな調子
